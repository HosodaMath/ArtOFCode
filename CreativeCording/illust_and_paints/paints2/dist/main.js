!function(){"use strict";class t{constructor(i,s){this.x=0,this.y=0,this.add=i=>(this.x=this.x+i.x,this.y=this.y+i.y,new t(this.x,this.y)),this.sub=i=>(this.x=this.x-i.x,this.y=this.y-i.y,new t(this.x,this.y)),this.multi=i=>(this.x=this.x*i,this.y=this.y*i,new t(this.x,this.y)),this.div=i=>(this.x=this.x/i,this.y=this.y/i,new t(this.x,this.y)),this.x=i,this.y=s}get coord_x(){return this.x}get coord_y(){return this.y}}t.add=(i,s)=>new t(i.x+s.x,i.y+s.y),t.sub=(i,s)=>new t(i.x-s.x,i.y-s.y),t.multi=(i,s)=>new t(i.x*s,i.y*s),t.div=(i,s)=>new t(i.x/s,i.y/s);class i{static random(t,i){return Math.random()*(i-t)+t}static floor(t){return Math.floor(t)}static PI(){return 3.141592653589793}static PI2(){return 2*this.PI()}static degTorad(t){return this.PI()/180*t}}class s{constructor(i,s,h){this.position=new t(0,0),this.rect_size=new t(0,0),this.draw=(t,i,s=1,h=1)=>{this.gl.globalAlpha=h,this.gl.fillStyle=t,this.gl.strokeStyle=i,this.gl.lineWidth=s,this.gl.beginPath(),this.gl.rect(this.position.x,this.position.y,this.rect_size.x,this.rect_size.y),this.gl.closePath(),this.gl.fill(),this.gl.stroke()},this.draw_fill=(t,i=1)=>{this.gl.globalAlpha=i,this.gl.fillStyle=t,this.gl.beginPath(),this.gl.rect(this.position.x,this.position.y,this.rect_size.x,this.rect_size.y),this.gl.closePath(),this.gl.fill()},this.draw_stroke=(t,i=1,s=1)=>{this.gl.globalAlpha=s,this.gl.strokeStyle=t,this.gl.lineWidth=i,this.gl.beginPath(),this.gl.rect(this.position.x,this.position.y,this.rect_size.x,this.rect_size.y),this.gl.closePath(),this.gl.stroke()},this.gl=i,this.position=s,this.rect_size=h}}class h{constructor(i,s,h,l){this.coordinate=new t(0,0),this.radius=0,this.velocity=new t(0,0),this.gl=i,this.coordinate=s,this.radius=h,this.velocity=l}paint_step(t){this.coordinate.add(this.velocity),(this.coordinate.x<0||this.coordinate.x>t.x)&&(this.velocity.x*=-1),(this.coordinate.y<0||this.coordinate.y>t.y)&&(this.velocity.y*=-1)}paints_draw(t){this.gl.fillStyle=t,this.gl.beginPath(),this.gl.arc(this.coordinate.x,this.coordinate.y,this.radius,0,2*Math.PI),this.gl.closePath(),this.gl.fill()}paints_stroke_draw(t,i=1){this.gl.strokeStyle=t,this.gl.lineWidth=i,this.gl.beginPath(),this.gl.arc(this.coordinate.x,this.coordinate.y,this.radius,0,2*Math.PI),this.gl.closePath(),this.gl.stroke()}paints_all_draw(t,i,s=1){this.gl.fillStyle=t,this.gl.strokeStyle=i,this.gl.lineWidth=s,this.gl.beginPath(),this.gl.arc(this.coordinate.x,this.coordinate.y,this.radius,0,2*Math.PI),this.gl.closePath(),this.gl.fill(),this.gl.stroke()}}class l{constructor(t,i){this.data=[],this.drawPolygon2=(t,i=1)=>{this.gl.fillStyle=t,this.gl.globalAlpha=i,this.gl.beginPath(),this.gl.moveTo(this.data[0].x,this.data[0].y);for(let t=1;t<this.data.length;t++)this.gl.lineTo(this.data[t].x,this.data[t].y);this.gl.closePath(),this.gl.fill()},this.draw=(t,i,s=1,h=1)=>{this.gl.fillStyle=t,this.gl.strokeStyle=i,this.gl.lineWidth=s,this.gl.globalAlpha=h,this.gl.beginPath(),this.gl.moveTo(this.data[0].x,this.data[0].y);for(let t=1;t<this.data.length;t++)this.gl.lineTo(this.data[t].x,this.data[t].y);this.gl.closePath(),this.gl.fill(),this.gl.stroke()},this.gl=t,this.data=i}}class e{constructor(s,h,e,o,a){this.location1=new t(0,0),this.velocity1=new t(0,0),this.angle=new t(0,0),this.scale=new t(0,0),this.stepFlower=t=>{let i=t.x,s=t.y;this.location1.add(this.velocity1),this.angle.x+=this.angle.y,this.scale.x+=this.scale.y,(this.location1.coord_x<0||this.location1.coord_x>i)&&(this.velocity1.x*=-1),(this.location1.coord_y<0||this.location1.coord_y>s)&&(this.velocity1.y*=-1)},this.drawFlower=(s,h=20,e=4)=>{let o=[];this.gl.save();for(let i=0;i<4*Math.PI;i+=.01){let s=Math.cos(e*i)*Math.cos(i)*h,l=Math.cos(e*i)*Math.sin(i)*h;o.push(new t(s,l))}let a=new l(this.gl,o);this.gl.translate(this.location1.x,this.location1.y),this.gl.rotate(i.degTorad(this.angle.x)),this.gl.scale(this.scale.x,this.scale.y),a.drawPolygon2(s),this.gl.restore()},this.gl=s,this.location1=h,this.velocity1=e,this.angle=o,this.scale=a}}const o=document.querySelector("canvas");if(!(o instanceof HTMLCanvasElement))throw new Error("not found canvas element");const a=o.getContext("2d");if(!a)throw new Error("canvasの初期化に失敗しました。");let r,n,c=0,g=0,d=[],y=[],w=[],x=[],f=[],u=new t(0,.01),p=new t(0,.05),P=[];const _=()=>{const l=o.width,e=o.height,c=new t(l,e);var g;n+=.01,n<20?(g=c,[...Array(30).keys()].forEach((t=>{r=new h(a,d[t],i.random(5,20),y[t]),r.paint_step(g),r.paints_draw(w[t])}))):n>20&&n<50&&(a.save(),(i=>{const h=i,l=new t(0,0);new s(a,l,h).draw_fill("rgb(255, 255, 255, 0.1)")})(c),a.restore(),a.save(),(t=>{[...Array(20).keys()].forEach((i=>{x[i].stepFlower(t),x[i].drawFlower(P[i],f[i])}))})(c),a.restore()),requestAnimationFrame(_)};o.width=c=window.innerWidth,o.height=g=window.innerHeight,n=0,(()=>{const s=["rgba(200, 250, 200, 0.1)","rgba(240, 250, 240, 0.1)","rgba(100, 250, 100, 0.1)","rgba(100, 200, 100, 0.1)"];[...Array(30).keys()].forEach((h=>{d[h]=new t(i.random(c/4,c-c/4),i.random(g/4,g-g/4)),y[h]=new t(i.random(-2,2),i.random(-2,2));let l=i.floor(i.random(0,s.length));w.push(s[l])}))})(),(()=>{let s,h;const l=["rgba(230, 230, 150, 0.2)","rgba(250, 150, 150, 0.2)","rgba(255, 160, 70, 0.2)"];[...Array(20).keys()].forEach((o=>{s=new t(i.random(0,c),i.random(0,g)),h=new t(i.random(0,0),i.random(0,0)),x[o]=new e(a,s,h,u,p),f[o]=i.random(10,30);let r=i.floor(i.random(0,l.length));P.push(l[r])}))})(),window.onload=_}();